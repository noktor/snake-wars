<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Battle Royale</title>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
  <style>
    #gameScreen { display: none; }
    #gameListScreen { display: none; }
    .joinGameContainer { border: 1px solid; border-radius: 5px; width: 100px; padding: 10px; cursor: pointer; }
    .joinGameContainer:hover { background-color: gray; color: white; }
  </style>
</head>
<body>
  <section class="vh-100">
    <div class="container h-100">
      <div id="initialScreen" class="h-100">
        <div class="d-flex flex-column align-items-center justify-content-center h-100">
          <h1>Battle Royale</h1>
          <input type="hidden" id="nickNameInput"/>
          <p class="mb-3">Playing as: <strong id="nicknameDisplay"></strong> <a href="../index.html">Change</a></p>
          <button type="button" class="btn btn-success" id="showGameListBtn">Game List</button>
          <div id="errorMessage" class="text-danger mt-2"></div>
        </div>
      </div>
      <div id="gameListScreen" class="h-100">
        <div class="d-flex flex-column align-items-center justify-content-center h-100">
          <h1>Join or create a game</h1>
          <div id="gameListContainer"></div>
          <button type="button" class="btn btn-success mt-3" id="newGameBtn">Create New Game</button>
          <a href="../index.html" class="btn btn-danger mt-2">Back to games</a>
        </div>
      </div>
      <div id="gameScreen" class="h-100">
        <div class="d-flex flex-column align-items-center">
          <h5 id="gameCodeTitle">Code: <span id="gameCodeDisplay"></span></h5>
          <div id="gameUi" style="position: relative; display: inline-block;">
            <canvas id="canvas" width="800" height="600"></canvas>
            <canvas id="minimap" width="120" height="120" style="position: absolute; top: 10px; right: 10px; border: 2px solid #444; width: 120px; height: 120px;"></canvas>
            <div id="zoneTimer" style="position: absolute; top: 10px; left: 10px; background: rgba(0,0,0,0.6); color: #ffc800; padding: 4px 10px; border-radius: 4px; font-size: 12px;"></div>
            <div id="playersRemaining" style="position: absolute; top: 10px; right: 140px; background: rgba(0,0,0,0.7); color: #e74c3c; padding: 4px 10px; border-radius: 4px; font-size: 13px; font-weight: bold;">—</div>
            <div id="gameInstructions" style="position: absolute; top: 38px; left: 10px; background: rgba(0,0,0,0.5); color: #ccc; padding: 4px 8px; border-radius: 4px; font-size: 11px;">WASD move · Mouse aim · <strong>Click or Space</strong> attack · [1][2][3] weapons · E shop · G flash · T trap · H drone · V alt fire</div>
            <div id="healthBar" style="position: absolute; bottom: 10px; left: 10px; right: 10px; max-width: 100%; background: rgba(0,0,0,0.6); color: #fff; padding: 6px 12px; border-radius: 4px; font-size: 12px; box-sizing: border-box;">Health: 100</div>
            <div id="shopPanel" style="display: none; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: rgba(20,20,25,0.95); border: 2px solid #f1c40f; border-radius: 8px; padding: 16px; min-width: 220px; color: #eee;">
                <div style="margin-bottom: 10px; font-weight: bold; color: #f1c40f;">Shop (E to close)</div>
                <div id="shopInventoryList"></div>
                <div style="margin-top: 8px; font-size: 12px; color: #aaa;">Your gold: <span id="shopGold">0</span></div>
            </div>
          </div>
          <div id="winnerBanner" style="display: none; margin-top: 12px; font-size: 24px; font-weight: bold; color: #f1c40f; text-shadow: 0 0 8px #000;"></div>
        </div>
      </div>
    </div>
  </section>
  <script>window.SNAKE_WARS_BACKEND_URL = window.SNAKE_WARS_BACKEND_URL || 'https://snake-wars-production.up.railway.app';</script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.8.1/socket.io.min.js"></script>
  <script src="br.js"></script>
</body>
</html>
